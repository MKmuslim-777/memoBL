<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bismillah Lybrari - ইনভয়েস</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* বেসিক সেটআপ */
@import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&display=swap');

:root {
    --primary: #4CAF50;
    --secondary: #2196F3;
    --accent: #FFC107;
    --dark: #333;
    --light: #f9f9f9;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Hind Siliguri', sans-serif;
}

body {
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    min-height: 100vh;
    padding: 20px;
}

/* মেমো কন্টেইনার */
.memo-container {
    max-width: 900px;
    margin: 0 auto;
    background: white;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
    overflow: hidden;
    animation: fadeIn 0.8s ease;
}

/* হেডার স্টাইল */
.header {
    background: linear-gradient(45deg, var(--primary), var(--secondary));
    color: white;
    padding: 25px;
    text-align: center;
    position: relative;
}

.logo {
    display: inline-block;
    background: rgba(255, 255, 255, 0.2);
    padding: 15px 30px;
    border-radius: 50px;
    margin-bottom: 15px;
    backdrop-filter: blur(5px);
    position: relative;
}

.logo-text {
    font-size: 32px;
    font-weight: 700;
    color: white;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.logo-subtext {
    font-size: 20px;
    color: var(--accent);
    margin-left: 8px;
}

.star-icon {
    position: absolute;
    top: -10px;
    right: -10px;
    color: var(--accent);
    font-size: 24px;
    animation: spin 5s linear infinite;
}

.info-box {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 10px;
}

.info-box p {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 16px;
}

/* টেবিল স্টাইল */
#items-table {
    width: 100%;
    border-collapse: collapse;
    margin: 0;
}

#items-table th {
    background: linear-gradient(to right, var(--primary), var(--secondary));
    color: white;
    padding: 12px;
    text-align: left;
}

#items-table td {
    padding: 12px;
    border-bottom: 1px solid #eee;
}

#items-table tr:hover {
    background-color: rgba(76, 175, 80, 0.05);
}

/* ইনপুট ফর্ম */
.add-item-form {
    padding: 20px;
    background: #f9f9f9;
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    align-items: center;
    justify-content: center;
}

.input-group {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.animate-input {
    flex: 1;
    min-width: 150px;
    padding: 12px;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-size: 16px;
    transition: all 0.3s;
}

.animate-input:focus {
    border-color: var(--secondary);
    box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
    transform: translateY(-2px);
}

/* বাটন স্টাইল */
button {
    padding: 12px 20px;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s;
}

.btn-add {
    background: var(--primary);
    color: white;
}

.btn-clear {
    background: #ff5252;
    color: white;
}

.btn-pdf {
    background: #ff5722;
    color: white;
}

.btn-print {
    background: #607d8b;
    color: white;
}

button:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

button:active {
    transform: translateY(1px);
}

/* ফুটার */
.footer {
    padding: 20px;
    background: linear-gradient(to right, #f5f5f5, #e0e0e0);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.total-box {
    text-align: right;
}

.total-box h2 {
    color: var(--primary);
    font-size: 28px;
    margin-top: 5px;
}

/* প্রিন্ট স্টাইল */
@media print {
    body * {
        visibility: hidden;
    }
    .memo-container, .memo-container * {
        visibility: visible;
    }
    .memo-container {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        box-shadow: none;
    }
    .add-item-form, button, #items-table th:nth-child(6), #items-table td:nth-child(6) {
        display: none !important; /* Hide Action column */
    }
    .total-box {
        text-align: right;
        font-size: 20px;
        font-weight: bold;
        margin-top: 20px;
    }
}

/* অ্যানিমেশন */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.animate-pop {
    animation: pop 0.5s ease;
}

.animate-float {
    animation: float 3s ease-in-out infinite;
}

.animate-fade {
    animation: fadeIn 1s ease;
}

.animate-slide {
    animation: slideIn 0.8s ease;
}

.animate-pulse {
    animation: pulse 2s infinite;
}

.animate-input {
    animation: inputFocus 0.5s ease;
}

@keyframes pop {
    0% { transform: scale(0.9); opacity: 0; }
    80% { transform: scale(1.05); }
    100% { transform: scale(1); opacity: 1; }
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

@keyframes slideIn {
    from { transform: translateX(-50px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

@keyframes inputFocus {
    from { transform: scale(0.95); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

/* Language Toggle Button */
.language-toggle {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 50px;
    height: 50px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 20px;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    transition: transform 0.3s ease, background-color 0.3s ease;
}

.language-toggle:hover {
    transform: scale(1.1);
    background: var(--secondary);
}
    </style>
</head>
<body>
    <!-- Language Toggle Button -->
    <div class="language-toggle" onclick="toggleLanguage()">
        <i class="fas fa-language"></i>
    </div>

    <div class="memo-container" id="memo-template">
        <!-- হেডার -->
        <div class="header animate-pop">
            <div class="logo animate-float">
                <span class="logo-text">Bismillah</span>
                <span class="logo-subtext">Lybrari</span>
                <i class="fas fa-star star-icon"></i>
            </div>
            <div class="info-box">
                <p><i class="fas fa-file-invoice"></i> Invoice: <span id="invoice-no">BL-1001</span></p>
                <p><i class="fas fa-calendar-day"></i> Date: <span id="current-date"></span></p>
            </div>
        </div>

        <!-- আইটেম টেবিল -->
        <table id="items-table" class="animate-fade">
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Unit</th> <!-- New Unit Column -->
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Total</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="items-body"></tbody>
        </table>

        <!-- নতুন আইটেম ফর্ম -->
        <div class="add-item-form animate-slide">
            <div class="input-group">
                <input type="text" id="item-name" placeholder="Item Name" class="animate-input">
                <input type="text" id="item-unit" placeholder="Unit" class="animate-input"> <!-- New Unit Field -->
                <input type="number" id="item-qty" placeholder="Quantity" class="animate-input">
                <input type="number" id="item-price" placeholder="Price" class="animate-input">
            </div>
            <button onclick="addItem()" class="btn-add animate-pulse">
                <i class="fas fa-plus-circle"></i> Add
            </button>
            <button onclick="clearAll()" class="btn-clear animate-pulse">
                <i class="fas fa-trash-alt"></i> Remove
            </button>
        </div>

        <!-- টোটাল -->
        <div class="footer animate-pop">
            <div class="total-box">
                <p>সর্বমোট:</p>
                <h2 id="total-amount">০ TK</h2>
            </div>
            <button onclick="window.print()" class="btn-print">
                <i class="fas fa-print"></i> Printe
            </button>
        </div>
    </div>

    <!-- স্ক্রিপ্ট -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        // ডাটা ম্যানেজমেন্ট
let items = JSON.parse(localStorage.getItem('memoItems')) || [];
let invoiceNo = localStorage.getItem('invoiceNo') || 'AZ-1000';

// ডকুমেন্ট লোড
document.addEventListener('DOMContentLoaded', () => {
    updateInvoiceNo();
    renderItems();
    document.getElementById('current-date').textContent = new Date().toLocaleDateString('bn-BD');
});

// আইটেম যোগ
function addItem() {
    const name = document.getElementById('item-name').value.trim();
    const unit = document.getElementById('item-unit').value.trim(); // New Unit Field
    const qty = parseInt(document.getElementById('item-qty').value);
    const price = parseInt(document.getElementById('item-price').value);

    if (name && unit && !isNaN(qty) && !isNaN(price)) {
        const tbody = document.getElementById('items-body');
        const row = tbody.insertRow();
        const total = qty * price;

        row.innerHTML = `
            <td>${name}</td>
            <td>${unit}</td> <!-- Display Unit -->
            <td>${qty}</td>
            <td>${price} Tk</td>
            <td>${total} Tk</td>
            <td><button onclick="deleteItem(this)" class="btn-delete"><i class="fas fa-trash"></i></button></td>
        `;

        updateTotal();
        resetForm();
    } else {
        alert('Fill in all the information correctly!');
    }
}

function deleteItem(button) {
    const row = button.parentElement.parentElement;
    row.remove();
    updateTotal();
}

function updateTotal() {
    const tbody = document.getElementById('items-body');
    let total = 0;

    Array.from(tbody.rows).forEach(row => {
        const rowTotal = parseFloat(row.cells[4].textContent.replace(' Tk', ''));
        total += rowTotal;
    });

    document.getElementById('total-amount').textContent = `${total} Tk`;
}

function resetForm() {
    document.getElementById('item-name').value = '';
    document.getElementById('item-unit').value = ''; // Reset Unit Field
    document.getElementById('item-qty').value = '';
    document.getElementById('item-price').value = '';
    document.getElementById('item-name').focus();
}

// আইটেম রেন্ডার
function renderItems() {
    const tbody = document.getElementById('items-body');
    tbody.innerHTML = '';
    let total = 0;

    items.forEach((item, index) => {
        const row = tbody.insertRow();
        row.className = 'animate-fade';
        const itemTotal = item.qty * item.price;
        total += itemTotal;

        row.innerHTML = `
            <td>${item.name}</td>
            <td>${item.unit}</td> <!-- Display Unit -->
            <td>${item.qty}</td>
            <td>${item.price} Tk</td>
            <td>${itemTotal} Tk</td>
            <td><button onclick="deleteItem(${index})" class="btn-delete"><i class="fas fa-trash"></i></button></td>
        `;
    });

    document.getElementById('total-amount').textContent = `${total} Tk`;
}

// আইটেম ডিলিট
function deleteItem(index) {
    items.splice(index, 1);
    saveToLocalStorage();
    renderItems();
    animateDelete();
}

// সব মুছুন
function clearAll() {
    if (confirm('Want to delete all items??')) {
        items = [];
        saveToLocalStorage();
        renderItems();
        animateClear();
    }
}

// PDF জেনারেট
function generatePDF() {
    const { jsPDF } = window.jspdf;
    const memo = document.getElementById('memo-template');
    
    // হাইড বাটন প্রিন্টের সময়
    const buttons = document.querySelectorAll('button');
    buttons.forEach(btn => btn.style.visibility = 'hidden');
    
    html2canvas(memo).then(canvas => {
        buttons.forEach(btn => btn.style.visibility = 'visible');
        const pdf = new jsPDF('p', 'mm', 'a4');
        const imgData = canvas.toDataURL('image/png');
        const imgWidth = 210;
        const imgHeight = (canvas.height * imgWidth) / canvas.width;
        
        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);
        pdf.save(`Bismillah_Invoice${invoiceNo}.pdf`);
    });
}

// লোকাল স্টোরেজ
function saveToLocalStorage() {
    localStorage.setItem('memoItems', JSON.stringify(items));
}

// ইনভয়েস নম্বর
function updateInvoiceNo() {
    const lastNum = parseInt(invoiceNo.split('-')[1]);
    invoiceNo = `AZ-${String(lastNum + 1).padStart(4, '0')}`;
    localStorage.setItem('invoiceNo', invoiceNo);
    document.getElementById('invoice-no').textContent = invoiceNo;
}

// ফর্ম রিসেট
function resetForm() {
    document.getElementById('item-name').value = '';
    document.getElementById('item-unit').value = ''; // Reset Unit Field
    document.getElementById('item-qty').value = '';
    document.getElementById('item-price').value = '';
    document.getElementById('item-name').focus();
}

// অ্যানিমেশন ফাংশন
function animateAddItem() {
    const lastRow = document.querySelector('#items-body tr:last-child');
    if (lastRow) {
        lastRow.style.animation = 'pop 0.5s ease';
        setTimeout(() => lastRow.style.animation = '', 500);
    }
}

function animateDelete() {
    const totalBox = document.querySelector('.total-box');
    totalBox.style.animation = 'shake 0.5s ease';
    setTimeout(() => totalBox.style.animation = '', 500);
}

function animateClear() {
    const table = document.getElementById('items-table');
    table.style.animation = 'fadeOut 0.5s ease';
    setTimeout(() => table.style.animation = '', 500);
}

// শেক অ্যানিমেশন
const style = document.createElement('style');
style.textContent = `
    @keyframes shake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-5px); }
        75% { transform: translateX(5px); }
    }
    @keyframes fadeOut {
        from { opacity: 1; }
        to { opacity: 0.5; }
    }
`;
document.head.appendChild(style);

// Language Toggle
let isEnglish = true;

function toggleLanguage() {
    isEnglish = !isEnglish;
    document.querySelector('.logo-text').textContent = isEnglish ? 'Bismillah' : 'বিসমিল্লাহ';
    document.querySelector('.logo-subtext').textContent = isEnglish ? 'Library' : 'লাইব্রেরি';
    document.querySelector('.btn-add').innerHTML = isEnglish ? '<i class="fas fa-plus-circle"></i> Add' : '<i class="fas fa-plus-circle"></i> যোগ করুন';
    document.querySelector('.btn-clear').innerHTML = isEnglish ? '<i class="fas fa-trash-alt"></i> Remove' : '<i class="fas fa-trash-alt"></i> সব মুছুন';
    document.querySelector('.btn-print').innerHTML = isEnglish ? '<i class="fas fa-print"></i> Print' : '<i class="fas fa-print"></i> প্রিন্ট';
    document.querySelector('.total-box p').textContent = isEnglish ? 'Total:' : 'সর্বমোট:';
}
    </script>
</body>
</html>
